<?xml version="1.0" encoding="UTF-8" ?>
<Module>
    <ModulePrefs title="Your App Name">
        <Require feature="rpc"/>
        <Require feature="views"/>
    </ModulePrefs>

    <Content type="html">
        <![CDATA[
            <!DOCTYPE html>
            <html>
                <head>
                    <meta charset="utf-8">

                    <style>
                        body {
                            color: #fff;
                            background: #112c36;
                        }
                        
                        header {
                            height: 100px;
                            text-align: center;
                            background: #073648;
                        }
                        
                        header > img {
                            height: 100px;
                        }
                        
                        div {
                            display: none;
                        }
                        
                        .inline-block {
                            display: inline-block;
                            vertical-align: top;
                            margin: 30px;
                        }
                        
                        .mentor-instructions,
                        .mentee-instructions {
                            width: 80%;
                            margin: 0 auto;
                        }
                    </style>

                    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
                    <script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script>
                    <script>
                        'use strict';

                        var postHangoutId = function(lessonId, hangoutId) {
                            var ajax = new XMLHttpRequest();

                            ajax.open('POST', 'https://www.codementor.io/api/lessons/' + lessonId + '/hangouts');
                            ajax.setRequestHeader('Content-type', 'application/json');
                            ajax.send('{"hangouts_id": "' + hangoutId + '"}');
                        };

                        gapi.hangout.onApiReady.add(function(event){
                            if (event.isApiReady) {
                                postHangoutId(gapi.hangout.getStartData(), gapi.hangout.getHangoutUrl().split('/').pop());
                                
                                if (1 === gapi.hangout.getParticipants().length) {
                                    $('.mentee-instructions').show();
                                } else {
                                    $('.mentor-instructions').show();
                                }
                            }
                        });
                    </script>
                </head>

                <body>
                    <header>
                        <img src="https://cdn.codementor.io/d/images/logos/logo-with-icon-laptop.png">
                    </header>
                    <div class="mentee-instructions">
                        <h1>Instructions</h1>
                        <div class="inline-block">
                            <p>1. Wait for the mentor to join the hangout</p>
                        </div>
                        <div class="inline-block">
                            <p>2. Accept the screen sharing request when being prompted</p>
                            <img src="https://cdn.codementor.io/d/images/google-hangouts-app/mentee-step-1.png">
                        </div>
                        <div class="inline-block">
                            <p>3. Enjoy the screen sharing</p>
                            <img width="250" src="https://cdn.codementor.io/d/images/google-hangouts-app/mentee-step-3.png">
                        </div>
                    </div>
                    <div class="mentor-instructions">
                        <h1>Instructions</h1>
                        <div class="inline-block">
                            <p>1. Click "Add apps"</p>
                            <img src="https://cdn.codementor.io/d/images/google-hangouts-app/mentor-step-1.png">
                        </div>
                        <div class="inline-block">
                            <p>2. Click "Remote Desktop"</p>
                            <img width="250" src="https://cdn.codementor.io/d/images/google-hangouts-app/mentor-step-2.png">
                        </div>
                        <div class="inline-block">
                            <p>3. Confirm that you'd like to help the mentee</p>
                            <img width="250" src="https://cdn.codementor.io/d/images/google-hangouts-app/mentor-step-4.png">
                        </div>
                    </div>
                </body>
            </html>
        ]]>
    </Content>
</Module>
